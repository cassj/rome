<div id="form">

<div id="progress"></div>

<!-- hidden iframe for targetting the form -->
<iframe id="upload_target" name="upload_target" src="#" style="width:0;height:0; border:0px solid #fff;" ></iframe>

  <form id="process_template_upload_form" 
        action="[%Catalyst.uri_for('/upload')%]" 
        method="post" 
        enctype="multipart/form-data" 
        target="upload_target" 
        onsubmit="start_upload('upload_messages');">

        <fieldset>
            <legend>Select a file to upload...</legend>

            <div id="upload_messages"></div>

	    <p>If you have many files, you can upload a zipped file or a tarball (optionally gzipped)
            <br/>It will be unpacked for you at the other end.
	    <br/>Do not include any directory structures when you pack up the files as this is not currently supported.
	    </p>

	   <div class="labelled_input">
               <label for="upload_file">File:</label>
               <input type="file" name="upload_file" />
            </div>

            <div class="labelled_input">
               <label for="subdir">Sub-directory: </label>
               <input type="text" name="subdir" id="subdir" />
               <div id="subdir_autocomplete_choices" class="autocomplete"></div>
                 <script type="text/javascript" language="javascript">
                 // <![CDATA[
                     new Ajax.Autocompleter("subdir","subdir_autocomplete_choices","/upload/autocomplete_subdir",{});
                 // ]]>
                 </script>
               </div>

            <br/><input type="submit" class="button" value="Upload"/><br/>
        </fieldset>
    </form>

</div>


<div id="upload_list">
[%INCLUDE 'upload/list'%]
</div>
