[% META title="Metadata" %]


[%# If there are no experimental outcomes defined for this experiment then it's 
    meaningles to define metadata  %]

[% IF Catalyst.user.experiment.outcomes < 1 %]
 
  <span class="warning">Not applicable for this experiment - no experimental outcomes defined</span>

[% ELSE %]


[%# List the experimental outcomes %]
<div id="outcome_list">
[% INCLUDE 'metadata/outcomes' %]
</div>

[%# List what we already have defined for this experiment %]

<div id="factors">
<h2>Factors in this experiment</h2>
[%IF Catalyst.user.experiment.factors%]

  <div id="factor_list">[%INCLUDE 'metadata/factor_list'%]</div>

[% ELSE %]

  <span class="warning">No factors yet defined for this experiment</span>

[% END %]
  <div id="factor_create_links">
    <a class="ajax_link" 
       href="/metadata/factor/create_form" 
       onclick=" new Ajax.Updater( 'factor_level_forms',  
                                   '/metadata/factor/create_form', 
                                    { asynchronous: 1,
                                      evalScripts: true,
                                      onSuccess: function(){new Effect.ScrollTo('factor_level_forms')} 
                                    } 
                                 ) ; return false"
     >Create a Factor</a>

     <a class="ajax_link" 
        href="/metadata/level/create_form" 
        onclick=" new Ajax.Updater( 'factor_level_forms',  
                                    '/metadata/level/create_form', 
                                    { asynchronous: 1,
                                      evalScripts: true,
	   		              onSuccess: function(){new Effect.ScrollTo('factor_level_forms')}
                                    } 
                                  ) ; return false"
     >Create a  Level of a factor</a>

  </div>

</div>

<div id="cont_vars">
<h2>Continuous Variables in this experiment</h2>
[%IF Catalyst.user.experiment.cont_vars%]
  <div id="cont_var_list">[%INCLUDE 'metadata/cont_var_list'%]</div>
[% ELSE %]
     <span class="warning">No continuous variables yet defined for this experiment</span>
[% END %]

  <div id="cont_var_create_links">
   <a class="ajax_link" 
      href="/metadata/cont_var/create_form" 
      onclick=" new Ajax.Updater( 'factor_level_forms',  
                                  '/metadata/cont_var/create_form', 
                                  { asynchronous: 1,
                                    evalScripts: true,
                                    onSuccess: function(){new Effect.ScrollTo('factor_level_forms')}
                                  } 
                                ) ; return false"
   >Create a Continuous Varible</a>

  </div>

</div>



<div id="factor_level_forms"></div>


<div id="add_forms">
[% INCLUDE 'metadata/add_form' %]
</div>

[% END %]

